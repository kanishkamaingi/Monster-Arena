<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Battles</title>
    <link rel="stylesheet" href="/css/main.css" />
  </head>
  <body class="bg-background min-h-screen flex flex-col items-center">
    <%- include('partials/navbar', { page: '/battles' }) %>

    <header class="w-full py-4 shadow-md bg-base-100">
      <h1 class="text-center text-3xl font-bold">Monster Arena - Ongoing Battles</h1>
    </header>
    
    <main class="px-4 py-6 w-full flex justify-center">
      <!-- Battles Table Container -->
      <div class="w-full max-w-4xl p-4 rounded bg-base-200 shadow-lg">
        <!-- Overflow Wrapper for Responsiveness -->
        <div class="overflow-x-auto">
          <table class="table w-full bg-base-100 text-white">
            <thead>
              <tr>
                <th>#</th>
                <th>Monster One</th>
                <th>Monster Two</th>
                <th>Status</th>
                <th>Details</th>
              </tr>
            </thead>
            <tbody>
              <% battles.forEach((battle, index) => { %>
                <tr>
                  <th><%= index + 1 %></th>
                  <td><%= battle.MonsterOne.name %></td>
                  <td><%= battle.MonsterTwo.name %></td>
                  <td><%= battle.status %></td>
                  <td>
                    <a href="/battles/<%= battle.battle_id %>" class="btn btn-ghost bg-base-100 btn-sm">
                      View Details
                    </a>
                  </td>
                </tr>
              <% }) %>
              <!-- Show message if no battles exist -->
              <% if (battles.length === 0) { %>
                <tr>
                  <td colspan="5" class="text-center">
                    No ongoing battles at the moment.
                  </td>
                </tr>
              <% } %>
            </tbody>
          </table>
        </div>
      </div>
    </main>

    <footer class="w-full py-4 text-center text-sm bg-base-100">
      Â© <%= new Date().getFullYear() %> Monster Arena. All rights reserved.
    </footer>
  </body>
</html>
